ทดสอบ Single Task:

สังเกตการทำงานของ LED
กดปุ่มและสังเกตเวลาตอบสนอง
บันทึกเวลาตอบสนองเมื่อกดปุ่ม
```c
I (8043) SINGLE_TASK: Controlling actuator...
W (8643) SINGLE_TASK: Button pressed! (Delayed response)
I (8643) SINGLE_TASK: Reading sensor...
I (9643) SINGLE_TASK: Processing data...
I (9713) SINGLE_TASK: Controlling actuator...
I (10313) SINGLE_TASK: Reading sensor...
I (11313) SINGLE_TASK: Processing data...
I (11383) SINGLE_TASK: Controlling actuator...
I (11983) SINGLE_TASK: Reading sensor...
I (12983) SINGLE_TASK: Processing data...
I (13053) SINGLE_TASK: Controlling actuator...
W (13653) SINGLE_TASK: Button pressed! (Delayed response)
I (13653) SINGLE_TASK: Reading sensor...
I (14653) SINGLE_TASK: Processing data...
I (14723) SINGLE_TASK: Controlling actuator...
I (15323) SINGLE_TASK: Reading sensor...
I (16323) SINGLE_TASK: Processing data...
I (16393) SINGLE_TASK: Controlling actuator...
I (16993) SINGLE_TASK: Reading sensor...
I (17993) SINGLE_TASK: Processing data...
I (18063) SINGLE_TASK: Controlling actuator...
I (18663) SINGLE_TASK: Reading sensor...
I (19663) SINGLE_TASK: Processing data...
I (19733) SINGLE_TASK: Controlling actuator...
```


ทดสอบ Single Task:

สังเกตการทำงานของ LED
กดปุ่มและสังเกตเวลาตอบสนอง
บันทึกเวลาตอบสนองเมื่อกดปุ่ม
```c
I (8043) MULTITASK: Controlling actuator...
W (8643) MULTITASK: Button pressed! (Delayed response)
I (8643) MULTITASK: Reading sensor...
I (9643) MULTITASK: Processing data...
I (9713) MULTITASK: Controlling actuator...
I (10313) MULTITASK Reading sensor...

```


### คำถามสำหรับวิเคราะห์
ความแตกต่างในการตอบสนองปุ่มระหว่างทั้งสองระบบคืออะไร?
- Single Task System: การตอบสนองของปุ่มจะล่าช้า เพราะโปรแกรมวนทำงานแต่ละงาน (Blink LED, คำนวณ, ควบคุม LED) แบบลำดับขั้น เมื่อปุ่มถูกกด ระบบจะตรวจสอบเฉพาะเมื่อวนถึงโค้ดเช็คปุ่ม → การตอบสนองไม่ทันที
- Multitasking System: แต่ละงานถูกแยกเป็น Task อิสระ ทำงานพร้อมกัน (โดย Scheduler ของ FreeRTOS) ดังนั้น Task ที่คอยอ่านปุ่มจะสามารถตรวจจับได้แทบจะทันที → การตอบสนองเร็วขึ้นและเสถียรกว่า
ใน Single Task System งานไหนที่ทำให้การตอบสนองล่าช้า?
- งาน Processing data (heavy computation) ซึ่งใช้ลูป for (int i=0; i<1000000; i++) ทำให้ CPU ถูกใช้เต็มช่วงเวลานั้น → ไม่มีเวลาไปตรวจสอบปุ่มจนกว่างานนี้จะเสร็จ → กดปุ่มแล้วตอบสนองช้า
ข้อดีของ Multitasking System ที่สังเกตได้คืออะไร?
- การตอบสนองทันที: Task ที่เกี่ยวกับปุ่มหรือเหตุฉุกเฉินทำงานได้ทันที โดยไม่ต้องรอให้ Task อื่นจบ
- ความเป็นระเบียบ: การแบ่งงานออกเป็น Task ทำให้โค้ดอ่านง่าย ดูแยกหน้าที่ชัดเจน
- เพิ่มความน่าเชื่อถือ: ระบบไม่พลาดเหตุการณ์สำคัญ (เช่น การกดปุ่ม Emergency)
มีข้อเสียของ Multitasking System ที่สังเกตได้หรือไม่?
- การจัดการซับซ้อนกว่า: ต้องคำนึงถึง Priority, Synchronization, และการใช้ Shared Resource
- Overhead ของ Scheduler: มีการสลับ Task ตลอดเวลา ทำให้สิ้นเปลืองบางส่วนเมื่อเทียบกับ Single Task
- ถ้าออกแบบ Priority ไม่ดี: อาจเกิดปัญหา Task starvation (บางงานไม่ได้รันเลย)
